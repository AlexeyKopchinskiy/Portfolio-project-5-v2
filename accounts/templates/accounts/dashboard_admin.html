{% extends 'accounts/dashboard_base.html' %}
{% if messages %}
  {% for message in messages %}
    <div class="alert alert-success alert-dismissible fade show mt-3" role="alert">
      {{ message }}
      <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
  {% endfor %}
{% endif %}

{% block dashboard_title %}
  Welcome, Administrator {{ user.username }}
{% endblock %}

{% block dashboard_description %}
  Oversee the kingdom: manage users, monitor posts, and keep the system humming.
{% endblock %}

{% block dashboard_content %}
  <div class="d-flex align-items-center gap-3 mb-4">
    {% if user.profile.avatar %}
      <img src="{{ user.profile.avatar.url }}" alt="{{ user.username }}'s avatar"
           class="rounded-circle border shadow-sm"
           style="width: 64px; height: 64px; object-fit: cover;">
    {% else %}
      <div class="rounded-circle bg-secondary text-white d-flex align-items-center justify-content-center"
           style="width: 64px; height: 64px; font-size: 24px;">
        {{ user.username|slice:":1"|upper }}
      </div>
    {% endif %}
    <div>
      <h2 class="mb-0">Welcome, {{ user.username }}</h2>
      <small class="text-muted">Glad to have you back!</small>
    </div>
  </div>

<div class="container mt-4">
  <div class="row row-cols-1 row-cols-md-2 g-4">

    <!-- Admin Site Access -->
    <div class="col">
      <div class="card shadow-sm h-100">
        <div class="card-header bg-dark text-white">
          ⚙️ Admin Site
        </div>
        <div class="card-body">
          <p>Access Django’s built-in admin interface for advanced control.</p>
          <a href="{% url 'admin:index' %}" class="btn btn-primary btn-sm">Open Admin Site</a>
        </div>
      </div>
    </div>

    <!-- Analytics Placeholder -->
    <div class="col">
      <div class="card shadow-sm h-100">
        <div class="card-header bg-warning text-dark">
          📊 Site Analytics
        </div>
        <div class="card-body">
          <p>Coming soon: traffic stats, user engagement, and performance insights.</p>
          <button class="btn btn-outline-secondary btn-sm" disabled>Coming Soon</button>
        </div>
      </div>
    </div>

    <!-- User Management -->
    <div class="col">
      <div class="card shadow-sm h-100">
        <div class="card-header bg-primary text-white">
          🧑‍💼 User Management
        </div>
        <div class="card-body">
          <p>Manage registered users, update roles, and keep the community healthy.</p>
          <ul class="list-unstyled">
            <li><a href="{% url 'admin_update_users' %}" class="btn btn-sm btn-outline-primary mb-2">📝 Update Users</a></li>
            <li><a href="{% url 'admin_delete_users' %}" class="btn btn-sm btn-outline-danger mb-2">🗑️ Delete Users</a></li>
            <li><a href="{% url 'admin_change_user_type' %}" class="btn btn-sm btn-outline-info">🔄 Change User Type</a></li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Newsletter Management -->
    <div class="col">
      <div class="card shadow-sm h-100">
        <div class="card-header bg-primary text-white">
          📰 Newsletter Management
        </div>
        <div class="card-body">
          <p class="card-title">Newsletter Hub: csreate, edit, and preview newsletters.</p>
          <ul>
            <li><a href="{% url 'newsletter_dashboard' %}" class="btn btn-sm btn-outline-primary mb-2">Go to Dashboard</a></li>
            <li><a href="{% url 'create_newsletter' %}" class="btn btn-sm btn-outline-info">Create New Newsletter</a></li>
          </ul>
        </div>
      </div>
    </div>

    <!-- Contact Messages Management -->
    <div class="col">
      <div class="card shadow-sm h-100">
        <div class="card-header bg-success text-white">
          📬 Contact Messages
        </div>
        <div class="card-body">
          <p>Review and respond to messages submitted via the contact form.</p>
          <ul class="list-unstyled">
            <li><a href="{% url 'admin_contact_messages' %}" class="btn btn-sm btn-outline-success mb-2">📄 View Messages</a></li>
            {% comment %} <li><a href="{% url 'export_contact_messages' %}" class="btn btn-sm btn-outline-secondary mb-2">📤 Export Messages</a></li>
            <li><a href="{% url 'delete_contact_messages' %}" class="btn btn-sm btn-outline-danger">🗑️ Delete All</a></li> {% endcomment %}
          </ul>
        </div>
      </div>
    </div>

    <!-- Blog Post Management -->
    <div class="col">
      <div class="card shadow-sm h-100">
        <div class="card-header bg-info text-white">
          📝 Blog Post Management
        </div>
        <div class="card-body">
          <p>View, edit, and organize blog posts across the site.</p>
          <ul class="list-unstyled">
            <li><a href="{% url 'admin_manage_posts' %}" class="btn btn-sm btn-outline-info mb-2">📋 Manage Posts</a></li>
            <li><a href="{% url 'create_post' %}" class="btn btn-sm btn-outline-success mb-2">➕ Create New Post</a></li>
            <li><a href="{% url 'admin:blog_post_changelist' %}" class="btn btn-sm btn-outline-secondary">⚙️ Admin View</a></li>
          </ul>
        </div>
      </div>
    </div>

  </div>
</div>
{% endblock %}